<!DOCTYPE html>
<html>
  <head>
    <!-- sample origin: https://github.com/googlearchive/webplatform-samples -->
    <!-- http://localhost/webspeechdemo/webspeechdemo.html -->
    <meta charset="utf-8">
    <title>WebDupe plugin</title>
    <link href="./assets/css/bootstrap.min.css" rel="stylesheet">
    <link href="./assets/webdupe/css/webdupe.css" rel="stylesheet">
    <style>
      * {
        font-family: Verdana, Arial, sans-serif;
      }
      a:link {
        color:#000;
        text-decoration: none;
      }
      a:visited {
        color:#000;
      }
      a:hover {
        color:#33F;
      }
      .credits{
        width: inherit; 
        text-align: center; 
        margin-top: 10px; 
        position: fixed; 
        top: 100px;
        /*bottom: 0;*/
      }
      .action_credits{
        background: #ddd;
        position: fixed;
        /*right: 0;*/
        top: 0;
        width: 500px;
        height: 100%;
        padding: 10px;

        right: -500px;
        transition: all 0.55s ease-in-out;
      }
      .action_credits.showing{
        right: 0px;
        transition: all 0.55s ease-in-out;
      }
      .btnca{
        transform: rotate(270deg);
        /*position: relative;
        right: 69px;
        top: 11px;*/
        position: absolute;
        right: 477px;
        top: 21px;
        border-radius: 0;
      }
    </style>
  </head>
  <body>
    <h3>Welcome to WebDupe.js - Web Voice Action using Speech Plugin</h3>
    Starting using this plugin for free <b><a href="https://github.com/patelakash317/webdupe.js">Click here https://github.com/patelakash317/webdupe.js</a></b>
    <br/><br/>
    To test this plugin, press button at bottom right cornor of this page.
    <br/><br/>
    <b>After pressing:</b><br/>
    Test 1: Say <b>"Tell me about this website"</b>
    <br/><br/>
    Test 2: Say <b>"Redirect me to contact page"</b>
    <br/><br/>
    Test 3: Say <b>"Go back to previous page"</b>

    <br/><br/>
    Likewise add any number of commands you want your users to get response of. 
    <br/>
    Thank you for using this plugin.<br/>


    <div class="action_credits">
      <button class="btnca btn btn-primary" onclick="showCredits()">Actions</button>
      <div class="sendleft center">
        <div class="credits">
          <div class="center" id="headline"><a href="http://dvcs.w3.org/hg/speech-api/raw-file/tip/speechapi.html">WebDupe.js <br/>Web voice action plugin</a> demonstration</div>Google Chrome (Akash Patel [@patelakash317])
        </div>
      </div>
    </p>
    <script type="text/javascript" src="./assets/js/jquery-3.3.1.min.js"></script>
    <script type="text/javascript" src="./assets/js/popper.min.js"></script>
    <script type="text/javascript" src="./assets/js/bootstrap.min.js"></script>

    <script>
      // additional function
        function showCredits(){
          // console.log(document.getElementsByClassName('showing'))
          if($('.action_credits').hasClass('showing')){
            // console.log('hiding');
            $('.action_credits').removeClass("showing");

            $('.btnca').html('Actions');
            $('.btnca').removeClass('btn-danger');
            $('.btnca').addClass('btn-primary');
          } else {
            // console.log('un-hiding');
            $('.action_credits').addClass("showing");
            
            $('.btnca').html('&nbsp; Hide&nbsp;');
            $('.btnca').addClass('btn-danger');
            $('.btnca').removeClass('btn-primary');
          }
        }
      // additional function ensd
    </script>

    <script type="text/javascript" src="./assets/webdupe/js/webdupe.js"></script>
    <!-- action functions -->
    <script>
      // request keywords
        // full
          // let action_block = {
          //   //speakAboutUs(),
          //   'visit,open,contact,contact us,Page': {
          //     action_type: 'redirect',
          //     action_value: 'http://localhost/webspeechdemo/contact.html',
          //   },
          //   'visit,redirect,about,inform,open,say,speak,tell,about us,page': {
          //     action_type: 'call_function',
          //     action_value: 'callout/about',
          //   },
          // };

        // specific
          let action_block = {
            //speakAboutUs(),
            'contact,contact us': {
              action_type: 'redirect',
              action_value: 'https://patelakash317.github.io/webdupe/contact.html',
            },
            'about,info,about us': {
              action_type: 'call_function',
              action_value: 'speakAbout',
              // action_value: 'callout/about',
            },
            'back,previous page': {
              action_type: 'call_previous',
              action_value: '',
              // action_value: 'callout/about',
            },
          };
      // request keywords ends

      function speakAbout(){
        console.log('speak about call function called');
        var text = "This is a plugin which you can use it on your website to give your customers or users extra facility to get information about your website using voice actions or they can use it to redirect to some page very quickly, just by simply saying redirect me, to contact page.";
        // var text = $('#message').val();
        var msg = new SpeechSynthesisUtterance();
        var voices = window.speechSynthesis.getVoices();
        msg.voice = voices[4];
        msg.rate = 10 / 10;
        msg.pitch = 1;
        // msg.voice = voices[$('#voices').val()];
        // msg.rate = $('#rate').val() / 10;
        // msg.pitch = $('#pitch').val();
        msg.text = text;

        msg.onend = function(e) {
          console.log('Finished in ' + event.elapsedTime + ' seconds.');
        };

        speechSynthesis.speak(msg);
      }
      $(function(){
        // speech source: https://codepen.io/SteveJRobertson/pen/emGWaR
        // support: https://developers.google.com/web/updates/2014/01/Web-apps-that-talk-Introduction-to-the-Speech-Synthesis-API
        if ('speechSynthesis' in window) {
          speechSynthesis.onvoiceschanged = function() {
            // var $voicelist = $('#voices');

            // if($voicelist.find('option').length == 0) {
              // speechSynthesis.getVoices().forEach(function(voice, index) {
              //   var $option = $('<option>')
              //   .val(index)
              //   .html(voice.name + (voice.default ? ' (default)' :''));

              //   $voicelist.append($option);
              // });
            // }
          }
        } else {
        }
      });
    </script>
    <!-- action functions ends-->
  </body>
</html>